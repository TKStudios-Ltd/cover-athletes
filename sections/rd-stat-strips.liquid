{{ 'rd-stat-strips.js' | asset_url | script_tag }}

<section
  id="rd-stat-strips-{{ section.id }}"
  class="rd-stat-strips color-{{ section.settings.color_scheme }}"
  data-component="rd-stat-strips"
>
  <div class="rd-stat-strips__inner">

    {% for block in section.blocks %}
      {% assign b = block.settings %}

      <div class="rd-row rd-row--{{ b.direction }}" {{ block.shopify_attributes }}>

        {% if b.left_text != blank %}
          <div class="rd-row__left">
            {{ b.left_text }}
          </div>
        {% endif %}

        <div class="rd-row__pill">
          <div class="rd-row__pill-inner">
            {% if b.image %}
              {{ b.image
                | image_url: width: 1600
                | image_tag: class: 'rd-row__image'
              }}
            {% endif %}
          </div>
        </div>

        {% if b.right_text != blank %}
          <div class="rd-row__right">
            {{ b.right_text }}
          </div>
        {% endif %}

      </div>

    {% endfor %}

  </div>
</section>



<style>
/* Root wrapper */
.rd-stat-strips {
  padding-block: clamp(2.5rem, 6vw, 4rem);
}

/* Pull color tokens from Ritual theme */
.rd-stat-strips.color-background-1 { background: rgb(var(--color-base-background-1)); }
.rd-stat-strips.color-background-2 { background: rgb(var(--color-base-background-2)); }
.rd-stat-strips.color-accent-1     { background: rgb(var(--color-base-accent-1)); }
.rd-stat-strips.color-accent-2     { background: rgb(var(--color-base-accent-2)); }

/* Pill rows */
.rd-row {
  position: relative;
  display: flex;
  align-items: center;
  border-radius: 999px;
  overflow: hidden;
  min-height: clamp(68px, 10vw, 86px);

  background: rgb(var(--color-base-background-2)); /* light grey pill */
  isolation: isolate;

  /* Pre-animation state */
  opacity: 0;
  transform: translateY(20px);
  transition:
    opacity .6s ease .15s,
    transform .6s ease .15s;
}

/* Row visible */
.rd-row.is-visible {
  opacity: 1;
  transform: none;
}

/* Left + right text */
.rd-row__text-left,
.rd-row__text-right {
  z-index: 3;
  flex-shrink: 0;
  padding-inline: clamp(1rem, 2vw, 2rem);
  white-space: nowrap;
  display: flex;
  align-items: center;
}

.rd-row__text-left {
  color: #26FF8A;
  font-weight: 600;
  font-size: clamp(1.1rem, 3vw, 1.6rem);
  letter-spacing: 0.05em;
}

.rd-row__text-right {
  color: rgb(var(--color-foreground));
  font-size: clamp(1.3rem, 3.5vw, 2rem);
  letter-spacing: 0.03em;
  text-transform: uppercase;
}

/* Image container (center) */
.rd-row__image {
  flex: 1;
  height: 100%;
  overflow: hidden;
  position: relative;
  display: flex;
}

.rd-row__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;

  /* Pre-animation position */
  transform: translateX(var(--start-pos, -100%));
  transition: transform 1s cubic-bezier(.16,1,.3,1);
}

/* When row is visible */
.rd-row.is-visible .rd-row__image img {
  transform: translateX(0);
}

/* Left→Right wipe */
.rd-row--ltr {
  --start-pos: -100%;
}

/* Right→Left wipe */
.rd-row--rtl {
  --start-pos: 100%;
}

/* Mobile stack adjustment (keeps text side-by-side) */
@media (max-width: 600px) {
  .rd-row {
    flex-wrap: wrap;
    min-height: 100px;
  }
  .rd-row__image {
    order: 3;
    height: 60px;
  }
}

</style>

{% schema %}
{
  "name": "Stat Strips",
  "tag": "section",
  "class": "section rd-stat-strips-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Relentless testing"
    },
    {
      "type": "richtext",
      "id": "subheading",
      "label": "Subheading",
      "default": "<p>Add a short line about the years of R&D behind the product.</p>"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width",
      "default": true
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1",
      "options": [
        { "value": "background-1", "label": "Default" },
        { "value": "background-2", "label": "Inverse" },
        { "value": "background-3", "label": "Soft" },
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Row",
      "settings": [
        {
          "type": "text",
          "id": "leading_text",
          "label": "Leading stat (green)",
          "default": "6 YEARS"
        },
        {
          "type": "text",
          "id": "trailing_text",
          "label": "Trailing stat (black)",
          "default": "4500 HOURS"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Background image"
        },
        {
          "type": "select",
          "id": "direction",
          "label": "Wipe direction",
          "default": "ltr",
          "options": [
            { "value": "ltr", "label": "Left to right" },
            { "value": "rtl", "label": "Right to left" }
          ]
        },
        {
          "type": "checkbox",
          "id": "compact",
          "label": "Compact height",
          "default": false
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Stat Strips",
      "blocks": [
        {
          "type": "row",
          "settings": {
            "leading_text": "6 YEARS",
            "trailing_text": "4500 HOURS",
            "direction": "ltr"
          }
        },
        {
          "type": "row",
          "settings": {
            "leading_text": "42 PROTOTYPES",
            "trailing_text": "300KM FAST BALLS",
            "direction": "rtl"
          }
        }
      ]
    }
  ]
}
{% endschema %}
