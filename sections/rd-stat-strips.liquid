{{ 'rd-stat-strips.js' | asset_url | script_tag }}

<section
  id="rd-stat-strips-{{ section.id }}"
  class="rd-stat-strips color-{{ section.settings.color_scheme }}"
  data-component="rd-stat-strips"
>
  <div class="rd-stat-strips__inner">

    {% for block in section.blocks %}
      {% assign b = block.settings %}

      <div class="rd-row rd-row--{{ b.direction }}" {{ block.shopify_attributes }}>

        {% if b.direction == 'rtl' %}
          <!-- RTL: TEXT GROUP → IMAGE -->
          <div class="rd-row__textgroup">
            <span class="h3 rd-row__green">{{ b.green_text }}</span>
            <span class="h3 rd-row__black">{{ b.black_text }}</span>
          </div>

          <div class="rd-row__pill">
            <div class="rd-row__pill-inner">
              {{ b.image | image_url: width: 1600 | image_tag: class:'rd-row__image' }}
            </div>
          </div>

        {% else %}
          <!-- LTR: IMAGE → TEXT GROUP -->
          <div class="rd-row__pill">
            <div class="rd-row__pill-inner">
              {{ b.image | image_url: width: 1600 | image_tag: class:'rd-row__image' }}
            </div>
          </div>

          <div class="rd-row__textgroup">
            <span class="h3 rd-row__green">{{ b.green_text }}</span>
            <span class="h3 rd-row__black">{{ b.black_text }}</span>
          </div>
        {% endif %}

      </div>
    {% endfor %}

  </div>
</section>


<style>
/* Wrapper */
.rd-stat-strips__inner {
  display: flex;
  flex-direction: column;
  gap: 20px;
}


/* Each row */
.rd-row {
  display: flex;
  align-items: center;
  gap: 32px;
  width: 100%;
}


.rd-row__textgroup {
    display: flex;
    align-items: baseline;
    gap: 18px;
    white-space: nowrap;
    margin-bottom: -8px;
}

.rd-row__textgroup .h3 {
    font-weight: 300 !important;
    letter-spacing: -2px;
}

.rd-row__green {
  color: #26FF8A !important;
  font-size: 64px !important;
}

.rd-row__black {
  color: rgb(var(--color-foreground));
  font-size: 64px !important;
}


/* IMAGE PILL */
.rd-row__pill {
  flex: 1;
  border-radius: 999px;
  overflow: hidden;
  height: 60px;
  background: transparent;
  position: relative;
}

.rd-row__pill-inner {
  height: 100%;
  width: 100%;
  position: relative;
  overflow: hidden;
}

.rd-row__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;

  /* Start offscreen (wipe-in) */
  transform: translateX(var(--wipe-start, -100%));
  transition: transform 1s cubic-bezier(.16,1,.3,1);
}


/* DIRECTION LOGIC */
.rd-row--ltr .rd-row__image {
  --wipe-start: -100%; /* pill slides RIGHT */
}

.rd-row--rtl .rd-row__image {
  --wipe-start: 100%; /* pill slides LEFT */
}


/* When visible */
.rd-row.is-visible .rd-row__image {
  transform: translateX(0);
}

/* MOBILE RESPONSIVE */
@media (max-width: 768px) {
  .rd-row {
    flex-direction: column;
    align-items: stretch;
    gap: 20px;
  }

  .rd-row__pill {
    order: 2;
    height: 60px;
  }

  /* Text group always stays above/below image */
  .rd-row--rtl .rd-row__textgroup {
    order: 1;
  }
  .rd-row--ltr .rd-row__textgroup {
    order: 3;
  }

  .rd-row__green {
    font-size: 24px;
  }

  .rd-row__black {
    font-size: 24px;
  }
}

</style>

{% schema %}
{
  "name": "Stat Strips",
  "tag": "section",
  "class": "section rd-stat-strips-section",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1",
      "options": [
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "background-3", "label": "Background 3" },
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Row",
      "settings": [
        {
          "type": "text",
          "id": "green_text",
          "label": "Green text",
          "default": "6 YEARS"
        },
        {
          "type": "text",
          "id": "black_text",
          "label": "Black text",
          "default": "4500 HOURS"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "select",
          "id": "direction",
          "label": "Wipe direction",
          "default": "rtl",
          "options": [
            { "value": "rtl", "label": "Text left → image right" },
            { "value": "ltr", "label": "Image left → text right" }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Stat Strips",
      "blocks": [
        {
          "type": "row",
          "settings": {
            "green_text": "6",
            "black_text": "YEARS",
            "direction": "rtl"
          }
        },
        {
          "type": "row",
          "settings": {
            "green_text": "4500",
            "black_text": "HOURS",
            "direction": "ltr"
          }
        }
      ]
    }
  ]
}
{% endschema %}
