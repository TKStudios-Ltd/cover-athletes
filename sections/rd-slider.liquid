{% comment %}
  RD Slider â€” JS in assets/rd-slider.js
{% endcomment %}

{%- style -%}
.rd-slider-{{ section.id }} {
  width: 100%;
  position: relative;
  padding-top: {{ section.settings.pad_top }}px;
  padding-bottom: {{ section.settings.pad_bottom }}px;
}

.rd-slider-{{ section.id }} .rd-swiper {
  overflow: visible;
  width: 100%;
  cursor: url("{{ 'cursor-drag.svg' | asset_url }}") 20 20, grab;
}

.rd-slider-{{ section.id }} .swiper-wrapper {
  display: flex;
  align-items: stretch;
}

.rd-slider-{{ section.id }} .swiper-slide {
  flex: 0 0 auto;
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  padding: 24px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.rd-slider-{{ section.id }} .slide-bg {
  position: absolute;
  inset: 0;
  z-index: 1;
}
.rd-slider-{{ section.id }} .slide-bg img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.rd-slider-{{ section.id }} .slide-inner {
  position: relative;
  z-index: 2;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.rd-slider-{{ section.id }} .title {
  font-size: 26px;
  line-height: 1.2;
  font-weight: 600;
  max-width: 360px;
}

.rd-slider-{{ section.id }} .bottom {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
}

.rd-slider-{{ section.id }} .bottom a {
  font-weight: 600;
  text-decoration: underline;
}

.rd-slider-{{ section.id }} .icon img {
  width: 52px;
  height: auto;
}

{%- endstyle -%}

<section
  class="rd-slider-{{ section.id }}"
  data-component="rd-slider"
  data-section-id="{{ section.id }}"
  data-autoplay="{{ section.settings.autoplay }}"
  data-delay="{{ section.settings.delay | times: 1000 }}"
>

  <div class="swiper rd-swiper" id="RDSwiper-{{ section.id }}">
    <div class="swiper-wrapper">

      {% for block in section.blocks %}
      <div class="swiper-slide color-{{ block.settings.color_scheme }}" {{ block.shopify_attributes }}>

        <div class="slide-bg">
          {% if block.settings.image != blank %}
            {{ block.settings.image | image_url: width: 2000 | image_tag: loading: 'lazy' }}
          {% endif %}
        </div>

        <div class="slide-inner">

          {% if block.settings.title != blank %}
            <div class="title">{{ block.settings.title }}</div>
          {% endif %}

          <div class="bottom">
            {% if block.settings.link_label != blank %}
            <a href="{{ block.settings.link_url }}">{{ block.settings.link_label }}</a>
            {% endif %}

            {% if block.settings.icon != blank %}
            <div class="icon">
              {{ block.settings.icon | image_url: width: 64 | image_tag }}
            </div>
            {% endif %}
          </div>

        </div>

      </div>
      {% endfor %}

    </div>
  </div>

</section>

{% schema %}
{
  "name": "RD Slider",
  "class": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay",
      "default": true
    },
    {
      "type": "range",
      "id": "delay",
      "label": "Autoplay delay (seconds)",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "pad_top",
      "label": "Padding top",
      "min": 0,
      "max": 160,
      "step": 4,
      "default": 40
    },
    {
      "type": "range",
      "id": "pad_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 160,
      "step": 4,
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Background image" },

        { "type": "inline_richtext", "id": "title", "label": "Title" },

        { "type": "image_picker", "id": "icon", "label": "Bottom-right icon" },

        { "type": "url", "id": "link_url", "label": "Link URL" },
        { "type": "text", "id": "link_label", "label": "Link label", "default": "Read more" },

        { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme" }
      ]
    }
  ],
  "presets": [
    { "name": "RD Slider", "blocks": [ { "type": "slide" }, { "type": "slide" } ] }
  ]
}
{% endschema %}
