{% liquid
  assign product_obj = closest.product | default: product
%}

<div
  id="ProductStickyBar-{{ section.id }}"
  class="product-sticky-bar"
  data-sticky-bar
  data-trigger-id="hotspots"
  data-scroll-top-id="MainContent"
>
<div class="button-wrapper button-wrapper--button-secondary">
    <div class="product-sticky-bar__inner button button-secondary color-{{ section.settings.color_scheme }}">
        <div class="product-sticky-bar__left">
        <span class="product-sticky-bar__title">
            {{ product_obj.title }}
        </span>
        </div>

        <nav class="product-sticky-bar__center">
        {% for block in section.blocks %}
            {% if block.type == 'anchor' %}
            <button
                type="button"
                class="product-sticky-bar__link"
                data-scroll-to="{{ block.settings.anchor_id }}"
            >
                {{ block.settings.label }}
            </button>
            {% endif %}
        {% endfor %}
        </nav>

        <div class="product-sticky-bar__right">
        <span
            class="product-sticky-bar__price"
            data-sticky-price
        >
            {{ product_obj.selected_or_first_available_variant.price | money }}
        </span>

            <button class="button sticky-bar__cta" data-scroll-to-top>
                Shop now
            </button>
        </div>
    </div>
  </div>
</div>


{% stylesheet %}
.product-sticky-bar {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 25px; 
  transform: translateY(100%);
  transition: transform 0.3s ease;
  z-index: 9999;
}
.product-sticky-bar.is-visible {
  transform: translateY(0);
}

.product-sticky-bar .button-wrapper,
.product-sticky-bar__inner {
    max-width: 1000px;
    width: 100%;
    margin: auto;
}
.product-sticky-bar__inner {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    min-height: 54px;
    padding: 0 10px 0 25px;
}
.product-sticky-bar__left {
    justify-self: start;
}
.product-sticky-bar__center {
  display: flex;
  gap: 24px;
  justify-self: center;
}
.product-sticky-bar__right {
  display: flex;
  align-items: center;
  gap: 16px;
  justify-self: end;
}
.product-sticky-bar__title,
.product-sticky-bar__price,
.product-sticky-bar__link {
    font-family: 'Graphik', sans-serif;
    font-weight: 400;
    font-size: 12px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
}
.product-sticky-bar__link {
  background: none;
  border: none;
  padding: 0;
  opacity: .6;
  cursor: pointer;
}
.product-sticky-bar__link:hover {
  opacity: 1;
}
.product-sticky-bar__cta {
  padding: 10px 18px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
}
@media (max-width: 749px) {
  .product-sticky-bar__center {
    display: none;
  }
}
{% endstylesheet %}

{% schema %}
{
  "name": "Product sticky bar",
  "blocks": [
    {
      "type": "anchor",
      "name": "Anchor link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Specs"
        },
        {
          "type": "text",
          "id": "anchor_id",
          "label": "Anchor ID",
          "default": "specs"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "cta_label",
      "label": "CTA label",
      "default": "Shop now"
    },
    {
    "type": "color_scheme",
    "id": "color_scheme",
    "label": "Color scheme",
    "default": "scheme-1"
    }
  ],
  "presets": [
    {
      "name": "Product sticky bar"
    }
  ]
}
{% endschema %}
