<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="split-image-product section section--full-width color-{{ section.settings.color_scheme }}"
  style="
    --padding-block-start: {{ section.settings.padding-block-start }}px;
    --padding-block-end: {{ section.settings.padding-block-end }}px;
  "
>
  <div class="section-content-wrapper layout-panel-flex layout-panel-flex--row gap-style">

    {%- comment -%}
      Determine column order (Ritual does NOT allow comparison inside assign)
    {%- endcomment -%}
    {% assign image_left = false %}
    {% if section.settings.layout == 'image-left' %}
      {% assign image_left = true %}
    {% endif %}

    {%- comment -%}
      IMAGE COLUMN
    {%- endcomment -%}
    {% if image_left %}
      <div class="split-image-product__media">
        {% if section.settings.left_image != blank %}
          {{ section.settings.left_image | image_url: width: 1600 | image_tag: loading: 'lazy', class: 'split-image-product__image' }}
        {% else %}
          {{ 'image' | placeholder_svg_tag }}
        {% endif %}
      </div>
    {% endif %}

    {%- comment -%}
      PRODUCT CARD COLUMN
      We mount the REAL Ritual product card block here.
      This gives FULL access to:
      - groups
      - price
      - product-title
      - custom-liquid
      - gallery
      - swatches
      - review
      - buy-buttons
      - nested blocks
      - all the layout/spacing/appearance schema
      Nothing is locked.
    {%- endcomment -%}
    <div class="split-image-product__card">
    {% if section.settings.product %}
        {% assign product = section.settings.product %}
        {% content_for 'block', type: '_product-card', id: 'product-card' %}
    {% else %}
        <p>Select a product in section settings.</p>
    {% endif %}
    </div>

    {%- comment -%}
      IMAGE RIGHT
    {%- endcomment -%}
    {% unless image_left %}
      <div class="split-image-product__media">
        {% if section.settings.left_image != blank %}
          {{ section.settings.left_image | image_url: width: 1600 | image_tag: loading: 'lazy', class: 'split-image-product__image' }}
        {% else %}
          {{ 'image' | placeholder_svg_tag }}
        {% endif %}
      </div>
    {% endunless %}

  </div>
</div>

{% stylesheet %}
  .split-image-product__media {
    width: 100%;
  }

  .split-image-product__image {
    width: 100%;
    height: auto;
    display: block;
  }

  .split-image-product__card {
    width: 100%;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Split Image & Product",
  "settings": [
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    },
    {
      "type": "image_picker",
      "id": "left_image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        { "value": "image-left", "label": "Image left" },
        { "value": "image-right", "label": "Image right" }
      ],
      "default": "image-left"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top padding",
      "min": 0, "max": 120, "step": 5, "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom padding",
      "min": 0, "max": 120, "step": 5, "unit": "px",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "Split Image & Product",
      "category": "Products"
    }
  ]
}
{% endschema %}
